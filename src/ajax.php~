<?php
/**
 * $Id: ajax.php
 * @Author: Trần Ngọc Nhật
 * @Application: Horbee
 **/

define ( 'INAPP', true );

require_once dirname ( __FILE__ ) . '/init.php';

if (isset($_POST['customer']) && is_numeric($_POST['customer'])) {
	header('Content-Type:application/json;charset=utf-8');
	$query = isset($_POST['query']) ? trim($_POST['query']) : '';
	$customer = intval($_POST['customer']);
	if ($customer != Auth::get('id', -1)) {
		echo '{"status":"error","data",null,"msg":"Yêu cầu không hợp lệ"}';
		exit;
	}
	if (empty($query)) {
		echo '{"status":"error","data",null,"msg":"Vui lòng gõ vào tên công việc đã làm"}';
		exit;
	}
	$rows = array();
	$response = array(
		'status' => 'success',
		'data' => $rows,
		'msg' => 'Tìm thấy '.count($rows).' công việc !'
	);
	echo json_uencode($response);
	exit;
}